#!/usr/bin/env ruby

require './lib/story'
require './lib/runner'

case ARGV[0] && ARGV[0].strip
when 'create'
  name = ARGV[1]
  id = String(name.hash).tr('0-9-','asdfghjklui')

  IO.write("./stories/index/#{id}.rb", <<-STORY)
story '#{name}' do
  id '#{id}'
  status queued
  points 1
  # created_by :unassigned
  # assigned_to :unassigned
  # tags :one, :two
  #
  # description <<-DESCRIPTION
  # DESCRIPTION
  #
  # comment :username, <<-COMMENT
  # COMMEND
end
  STORY
when 'start'
when 'finish'
when 'tag'
when 'comment'
else
  if ARGV.any?
    CliTasks::Runner.run *ARGV
  else
    CliTasks::Runner.run 'examples/*'
  end
  puts
  puts sprintf(" %-20s | %-6s | %-60s | %-10s", :id, :points, :name, :status)
  puts sprintf(" %-20s | %6s | %-60s | %-10s", ?-*20, ?-*6, ?-*60, ?-*10)
  puts stories.map{|story| sprintf(" %-20s | %-6s | %-60s | %-10s", story.id, ?* * story.points.to_i, story.name.slice(0,60), story.status) }
end

